<tool id="ludwig_render_config" name="Ludwig Render Config" version="@VERSION@" profile="@PROFILE@">
    <description>renders thefull config based on user input</description>
    <macros>
        <import>ludwig_macros.xml</import>
    </macros>
    <expand macro="python_requirements" />
    <expand macro="macro_stdio" />
    <version_command>echo "@VERSION@"</version_command>
    <command>
        <![CDATA[
            python '$__tool_directory__/ludwig_render_config.py' '$inputs' '$output'
        ]]>
    </command>
    <configfiles>
        <inputs name="inputs" />
    </configfiles>
    <inputs>
        <section name="input_features" title="Input Features" expanded="true">
            <repeat name="input_feature" min="1" max="30" title="Input Feature">
                <conditional name="input_feature_selector" >
                    <param name="type" type="select" label="Select an input feature type">
                        <option value="numerical" selected="true">numerical</option>
                        <option value="binary">binary</option>
                        <option value="category">category</option>
                        <option value="set">set</option>
                        <option value="bag">bag</option>
                        <option value="sequence">sequence</option>
                        <option value="text">text</option>
                        <option value="timeseries">timeseries</option>
                        <option value="audio">audio</option>
                        <option value="image">image</option>
                        <option value="date">date</option>
                        <option value="h3">h3</option>
                        <option value="vector">vector</option>
                    </param>
                    <when value="numerical">
                        <param argument="name" type="text" value="" label="Name"/>
                        <param argument="encoder" type="select" label="Select an encoder">
                            <option value="passthrough" selected="true">passthrough</option>
                            <option value="dense">dense</option>
                        </param>
                    </when>
                    <when value="binary">
                    </when>
                    <when value="category">
                    </when>
                    <when value="set">
                    </when>
                    <when value="bag">
                    </when>
                    <when value="sequence">
                    </when>
                    <when value="text">
                    </when>
                    <when value="timeseries">
                    </when>
                    <when value="audio">
                    </when>
                    <when value="image">
                        <param argument="name" type="text" value="" label="name"/>
                        <param argument="encoder" type="select" label="Select an encoder">
                            <option value="stacked_cnn" selected="true">stacked_cnn</option>
                            <option value="resnet">resnet</option>
                        </param>
                    </when>
                    <when value="date">
                    </when>
                    <when value="h3">
                    </when>
                    <when value="vector">
                    </when>
                </conditional>
            </repeat>
        </section>
        <section name="output_features" title="Output Features" expanded="true">
            <repeat name="output_feature" min="1" max="30" title="Output Feature">
                <conditional name="output_feature_selector">
                    <param argument="type" type="select" label="Select an ouput feature type">
                        <option value="category" selected="true">category</option>
                        <option value="binary" >binary</option>
                        <option value="numerical" >numerical</option>
                        <option value="sequence" >sequence</option>
                        <option value="set" >set</option>
                        <option value="text" >text</option>
                        <option value="vector" >vector</option>
                    </param>
                    <when value="category">
                        <param argument="name" type="text" value="" />
                        <param argument="reduce_input" type="select" label="How to reduce an input that is not a vector, but a matrix or a higher order tensor, on the first dimension?">
                            <option value="sum" selected="true">sum</option>
                            <option value="mean" >mean</option>
                            <option value="avg" >avg</option>
                            <option value="max" >max</option>
                            <option value="concat" >concat</option>
                            <option value="last" >last</option>
                        </param>
                        <param argument="reduce_dependencies" type="select" label="How to reduce the output of a dependent feature that is not a vector, but a matrix or a higher order tensor, on the first dimension?">
                            <option value="sum" selected="true">sum</option>
                            <option value="mean" >mean</option>
                            <option value="avg" >avg</option>
                            <option value="max" >max</option>
                            <option value="concat" >concat</option>
                            <option value="last" >last</option>
                        </param>
                        <section name="loss" title="Loss Options" expanded="false">
                            <param argument="type" type="select" label="Select a loss type">
                                <option value="softmax_cross_entropy" selected="true">softmax_cross_entropy</option>
                                <option value="sampled_softmax_cross_entropy" >sampled_softmax_cross_entropy</option>
                            </param>
                        </section>
                        <param argument="top_k" type="integer" value="3" label="The number of categories to consider when computing the first k measure" help="This computes accuracy but considering as a match if the true category appears in the first k predicted categories ranked by decoder's confidence." />
                        <param argument="fc_size" type="integer" value="256" label="The size of the output of a fully connected layer" />
                        <param argument="activation" type="select" label="Select an activation function">
                            <option value="relu" selected="true">relu</option>
                        </param>
                    </when>
                    <when value="binary">
                        <param argument="name" type="text" value="" />
                    </when>
                    <when value="numerical">
                        <param argument="name" type="text" value="" />
                    </when>
                    <when value="sequence">
                        <param argument="name" type="text" value="" />
                    </when>
                    <when value="set">
                        <param argument="name" type="text" value="" />
                    </when>
                    <when value="text">
                        <param argument="name" type="text" value="" />
                    </when>
                    <when value="vector">
                        <param argument="name" type="text" value="" />
                    </when>
                </conditional>
            </repeat>
        </section>
        <section name="combiner" title="Combiner" expanded="false">
            <param name="type" type="select" label="Select a combiner type">
                <option value="concat" selected="true">concat</option>
                <option value="sequence_concat">sequence_concat</option>
                <option value="sequence">sequence</option>
                <option value="tabnet">tabnet</option>
                <option value="transformer">transformer</option>
                <option value="tabtransformer">tabtransformer</option>
                <option value="comparator">comparator</option>
            </param>
        </section>
        <section name="training" title="Training" expanded="false">
            <param argument="batch_size" type="integer" value="128" label="Batch size" />
            <param argument="epochs" type="integer" value="100" label="Number of epochs" />
            <conditional name="optimizer">
                <param name="type" type="select" label="Select an optimizer">
                    <option value="adam" selected="true">adam</option>
                    <option value="sgd">sgd</option>
                    <option value="adadelta">adadelta</option>
                    <option value="adagrad">adagrad</option>
                    <option value="adamax">adamax</option>
                    <option value="ftrl">ftrl</option>
                    <option value="nadam">nadam</option>
                    <option value="rmsprop">rmsprop</option>
                </param>
                <when value="adam" />
                <when value="sgd" />
                <when value="adadelta" />
                <when value="adagrad" />
                <when value="adamax" />
                <when value="ftrl" />
                <when value="nadam" />
                <when value="rmsprop" />
            </conditional>
            <param argument="learning_rate" type="float" value="0.001" label="Learning rate" />
            <param argument="early_stop" type="integer" value="5" label="Number of epochs of patience without an improvement on the validation measure before the training is stopped" />
            <!-- <param argument="decay" type="boolean" checked="false" label="Whether to use exponential decay of the learning rate?" />
            <param argument="decay_rate" type="float" value="0.96" label="Rate of the exponential learning rate decay" />
            <param argument="decay_steps" type="integer" value="1000" label="Number of steps of the exponential learning rate decay" /> -->
        </section>
        <!-- <section name="preprocessing" title="Preprocessing" expanded="false">
        </section> -->
        <conditional name="hyperopt">
            <param name="do_hyperopt" type="boolean" checked="false" label="Whether to do hyperparameter optimization?" />
            <when value="true">
                <section name="hyperopt" title="Hyperparameter Optimization configuration" expanded="false">
                </section>
            </when>
            <when value="false" />
        </conditional>
    </inputs>
    <outputs>
        <data format="yaml" name="output" label="${tool.name}" />
    </outputs>
    <tests>
        <test>
        </test>
    </tests>
    <help>
        <![CDATA[
**What it does**



**Input**



**Output**



        ]]>
    </help>
    <citations>
        <citation type="bibtex">
        </citation>
    </citations>
</tool>
